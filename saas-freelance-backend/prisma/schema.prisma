// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 1. O Usuário
model User {
  id               Int              @id @default(autoincrement())
  name             String
  email            String           @unique
  password         String
  userType         String
  
  // Relacionamentos
  clientServices   ServiceRequest[] @relation("ClientServices")
  providerServices ServiceRequest[] @relation("ProviderServices")
}

// 2. O Pedido de Serviço
model ServiceRequest {
  id          Int      @id @default(autoincrement())
  title       String
  description String
  budget      Float
  status      String   @default("ABERTO")
  
  // Endereço e Localização
  address     String?
  latitude    Float?
  longitude   Float?

  // NOVO CAMPO: Imagem
  imageUrl    String?

  // Quem criou (Cliente)
  clientId    Int
  client      User     @relation("ClientServices", fields: [clientId], references: [id])

  // Quem aceitou (Prestador)
  providerId  Int?
  provider    User?    @relation("ProviderServices", fields: [providerId], references: [id])

  createdAt   DateTime @default(now())
}